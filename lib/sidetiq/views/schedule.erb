<%= File.read(File.join(view_path, 'assets', 'styles.css')) %>

<header class="row">
  <div class="col-md-5">
    <h3><%= t('recurring_job') %>: <%= @worker.name %></h3>
  </div>
</header>

<div class="container">
  <div class="row">
    <%= erb File.read(File.join(view_path, '_worker_nav.erb')) %>

    <div class="col-md-9">
      <% if (recurrences = @schedule.recurrence_rules).length > 0 %>
      <table class="table table-striped table-bordered table-hover table-white" style="width: 100%; margin: 0; table-layout:fixed;">
        <thead>
          <th><%= t('recurrences') %></th>
        </thead>
        <% recurrences.each do |rule| %>
        <tr>
          <td><%= rule.to_s %></td>
        </tr>
        <% end %>
      </table>
      <% end %>

      <br />

      <% if (exceptions = @schedule.exception_rules).length > 0 %>
      <table class="table table-striped table-bordered table-hover table-white" style="width: 100%; margin: 0; table-layout:fixed;">
        <thead>
          <th><%= t('exceptions') %></th>
        </thead>
        <% exceptions.each do |rule| %>
        <tr>
          <td><%= rule.to_s %></td>
        </tr>
        <% end %>
      </table>
      <% end %>

      <br />

      <table class="table table-striped table-bordered table-hover table-white" style="width: 100%; margin: 0; table-layout:fixed;">
        <thead>
          <th style="width: 25%"><%= t('next_runs', times: 10) %></th>
          <th style="width: 75%" />
          <% @schedule.next_occurrences(10, @time).each do |time| %>
          <tr>
            <td><time><%= time.getutc %></time></td>
            <td><%= relative_time(time) %></td>
          </tr>
          <% end %>
      </table>
    </div>
  </div>
</div>

<br />
